$.blockUI.defaults.baseZ=99999;$.blockUI.defaults.message="<p class='progressMessage'>Please wait while we process your request</p>";$.blockUI.defaults.css.width='380px';$.fn.exists=function(){return this.length!==0;}
$(document).ready(function(){setupTypeOfBooking();setupSpecialNeeds();setupWebflowExtension();setupSlotTimer();setupTimeFields();setupTestCentreGroup();setupTestCentreSelectAutoComplete();setupSlotSearchResultsScreen();setupExistingFinancialStatementPanel();setupSendRequestsSelectAutoComplete();setupTestCentreSearchTypeWrapper();setupHelpToolTip();setupIE8Support();function setupSpecialNeeds(){var specialNeedsDiv=$("#specialNeeds").find(".specialNeedsWidget").find(".specialNeeds");showHideSpecialNeedsDiv(specialNeedsDiv);}
function setupSlotTimer(){if(!$("#slotCountdown").exists())return;var millisToWarning=parseInt($("#millisToWarning").text());var millisToTimeout=parseInt($("#millisToTimeout").text());if(millisToWarning>-1){$(document).stopTime("slot-timeout-warning").oneTime(millisToWarning,"slot-timeout-warning",function(){var warningDialog=$.dialogmanager.createDialog("Slot-Timeout-Warning-Dialog");warningDialog.dialog("setContent",$("#slotWarningPopup").html());warningDialog.find("#slotWarningClose").on("click",function(event){event.preventDefault();warningDialog.dialog("close");});warningDialog.dialog("open");});}
if(millisToTimeout>-1){$(document).stopTime("slot-timeout-expired").oneTime(millisToTimeout,"slot-timeout-expired",function(){var warningDialog=$.dialogmanager.getDialog("Slot-Timeout-Warning-Dialog");if(warningDialog)warningDialog.dialog("close");var flowExecutionKey=$(".flowExecutionKey");if(flowExecutionKey.length>0){var flowExecutionKeyVal=flowExecutionKey.last().text();var slotTimerFlowExecutionKeyVal=$("#slotTimerFlowExecutionKeyValue").val();if(slotTimerFlowExecutionKeyVal!==flowExecutionKeyVal){var slotTimeoutClose=$("#slotTimeoutClose");var slotTimeoutCloseUrl=slotTimeoutClose.attr("href").replace(slotTimerFlowExecutionKeyVal,flowExecutionKeyVal);slotTimeoutClose.attr("href",slotTimeoutCloseUrl);}}
var timeoutDialog=$.dialogmanager.createDialog("Slot-Timeout-Dialog");timeoutDialog.dialog("setContent",$("#slotTimeoutPopup").html());timeoutDialog.dialog("open");});}
$(document).stopTime("slot-timeout-countdown-remainder").oneTime((millisToTimeout%60000),"slot-timeout-countdown-remainder",function(){var minutesToTimeout=parseInt($("#minutesToTimeout").text());if(minutesToTimeout>0){$("#minutesToTimeout").text(--minutesToTimeout);$(document).stopTime("slot-timeout-countdown").everyTime(60000,"slot-timeout-countdown",function(){if(minutesToTimeout>0){$("#minutesToTimeout").text(--minutesToTimeout);}else{$(document).stopTime("slot-timeout-countdown");}});}});}
function setupTimeFields(){var $selectHour=$("select.hour:not(select.nomask)").find("option[value='-1']");if($selectHour.exists()){$selectHour.html("hr");}
var $selectMins=$("select.mins:not(select.nomask) option:first-child");if($selectMins.exists()){var label=$selectMins.text();if(label===""){$selectMins.text("mm");}}
var $inputMins=$("input.mins:not(input.nomask)");if($inputMins.exists()){var value=$inputMins.attr("value");if(value===""){$inputMins.attr("value","mm");}else if(value==="0"){$inputMins.attr("value","00");}
$inputMins.on("focus",function(){var value=$inputMins.attr("value");if(value==="mm"){$inputMins.attr("value","");$inputMins.mask("99");}});$inputMins.on("blur",function(){var value=$inputMins.attr("value");if(value===""||value.indexOf("_")!==-1||value<0||value>59){$inputMins.unmask();$inputMins.attr("value","mm");}});}
var $inputMin3=$("input.mins3");if($inputMin3.exists()){var min3value=$inputMin3.attr("value");if(min3value===""){$inputMin3.attr("value","mmm");}else if(min3value==="0"){$inputMin3.attr("value","0");}
$inputMin3.on("focus",function(){var value=$inputMin3.attr("value");if(value==="mmm"){$inputMin3.attr("value","");}});$inputMin3.on("blur",function(){var value=$inputMin3.attr("value");if(value===""||value.indexOf("_")!==-1||value<0||value>999){$inputMin3.unmask();$inputMin3.attr("value","mmm");}});}}
function setupTestCentreSelectAutoComplete(){var $testCentres=$("#testcentres");if(!$testCentres.exists())return;$testCentres.selectautocomplete({minLength:1,errorClass:"error",hasError:$testCentres.hasClass("error"),selectOptionFound:function(event,ui){$("#testcentresearchtype").click();$("#testcentregroups").val("-1");$("#favtestcentres").val("-1");},selectOptionNotFound:function(event,ui){$("#testcentresearchtype").prop("checked",false);}});}
function setupSlotSearchResultsScreen(){var $addTestCentre=$("#add_testcentre");if(!$addTestCentre.exists())return;$addTestCentre.selectautocomplete({minLength:1,errorClass:"error",hasError:$("#add_testcentre").hasClass("error")});}
function setupExistingFinancialStatementPanel(){var $existingFinancialStatements=$("#existingFinancialStatementsPanel");if(!$existingFinancialStatements.exists())return;var financialStatementsRefreshIntervalMillis=parseInt($("#financialStatementsRefreshIntervalMillis").text());if(financialStatementsRefreshIntervalMillis>-1){$("#refreshExistingFinancialStatements").each(function(){$(this).addClass("displayNone");$(document).oneTime(financialStatementsRefreshIntervalMillis,"financial-stmt-refresh-interval",function(){$("#refreshExistingFinancialStatements").click();});});};}
function setupSendRequestsSelectAutoComplete(){var $reqTBSlotsTestCentre=$("#reqTBSlotsTestCentre");if($reqTBSlotsTestCentre.exists()){$reqTBSlotsTestCentre.selectautocomplete({minLength:1,errorClass:"error",hasError:$reqTBSlotsTestCentre.hasClass("error")});}
var $reqTBSlotsAltTestCentre=$("#reqTBSlotsAltTestCentre");if($reqTBSlotsAltTestCentre.exists()){$reqTBSlotsAltTestCentre.selectautocomplete({minLength:1,errorClass:"error",hasError:$reqTBSlotsAltTestCentre.hasClass("error")});}}
function setupTestCentreSearchTypeWrapper(){$("#testCentreSearchTypeWrapper").hide();}
function setupIE8Support(){if($.browser.version===8.0){var $roundedBorder=$("div.roundedBorder-4");if(!$roundedBorder.exists())return;$roundedBorder.addClass("relative").append("<span class='tl' /><span class='tr' /><span class='bl' /><span class='br' />");}}});function setupTypeOfBooking(){var $bookerType=$("#bookerType");if($("#trainerBookerType").prop("checked")||($bookerType.val()==='TRAINER')){setupTrainerBooking();var $trainerBookingTestCategoryRecordId=$("#trainerBookingTestCategoryRecordId").val();if($trainerBookingTestCategoryRecordId==="-1"){hideUseOpeneningWeekLink();}else{showUseOpeneningWeekLink();}}else if($("#businessBookerType").prop("checked")||$bookerType.val()==='BUSINESS'){setupBusinessBooking();hideUseOpeneningWeekLink();}
$.dialogmanager.redrawTopDialog();}
$("#typeofbooking").on("change","input:radio",function(){if($(this).val()==='TRAINER'){setupTrainerBooking();}else if($(this).val()==='BUSINESS'){setupBusinessBooking();}});$("#specialNeeds").on("click","input:radio",function(){var specialNeedsDiv=$(this).closest(".specialNeedsWidget").find(".specialNeeds");showHideSpecialNeedsDiv(specialNeedsDiv);});function showHideSpecialNeedsDiv(specialNeedsDiv){if($("input.yesneeds").is(":checked")){specialNeedsDiv.show();}else{specialNeedsDiv.find("input:checkbox").each(function(){$(this).prop("checked",false);});specialNeedsDiv.hide();}
$.dialogmanager.redrawTopDialog();}
function setupHelpToolTip(){$("span.tooltip-icon").each(function(){var tooltipRef="#tooltip-"+$(this).attr("id");if($(tooltipRef).hasClass("tooltip-enabled"))return;$(this).removeAttr("title");$(tooltipRef).appendTo("body");if($.browser.msie&&$.browser.version<7.0){$(tooltipRef).bgIframe();}
$(this).tooltip({position:"center right",predelay:250,offset:[0,-10],tip:tooltipRef,effect:'fade'}).dynamic({classNames:'tooltip-help-top tooltip-help-right tooltip-help-bottom tooltip-help-left'});$(tooltipRef).addClass("tooltip-enabled");});$(document).find(".helpIcon").each(function(){$(this).on('focusin',function(){showHelpTooltip($(this));}).on('focusout',function(){hideHelpTooltip($(this));})});$(document).on("keyup",function(e){if(e.key==='Escape'){$(document).find(".tooltip-help-custom").each(function(){if($(this).is(":visible")){$(this).hide();}})}});}
function showHelpTooltip(helpIcon){var helpText=$("#tooltip-"+helpIcon.attr("id"));if(helpText.is(":hidden")){var iconOffset=helpIcon.offset();helpText.css({position:"absolute",left:iconOffset.left+20,top:iconOffset.top-helpText.height()/2-10})
helpText.show();}}
function hideHelpTooltip(helpIcon){var helpText=$("#tooltip-"+helpIcon.attr("id"));if(helpText.is(":visible")){helpText.hide();}}
$(document).on("mouseover","#browseslots",function(){$(this).find("td.day").find("a").each(function(){var tooltipRef="#tooltip-"+$(this).attr("id");if($(tooltipRef).exists()){$(this).tooltip({position:"bottom center",predelay:1000,offset:[-10,0],tip:tooltipRef,effect:'fade'});$(this).dynamic({classNames:'tooltip-tcavailability-top tooltip-tcavailability-right tooltip-tcavailability-bottom tooltip-tcavailability-left'});}});});$(document).on("click","#availabilityNotificationSelectAllDays",function(){$('input[id*="availabilityNotification_"]').each(function(){$(this).prop("checked",true);});return false;});$(document).on("click","#availabilityNotificationDeselectAllDays",function(){$('input[id*="availabilityNotification_"]').each(function(){$(this).prop("checked",false);});return false;});$("#first-login").each(function(){var firstLoginDialog=$.dialogmanager.createDialog("first-login-dialog");firstLoginDialog.dialog("setContent",$(this));firstLoginDialog.dialog("open");});$("#back-button-warning").each(function(){$("#backButtonCloseDialog").closest(".displayNone").removeClass("displayNone");var backButtonDialog=$.dialogmanager.createDialog("back-button-warning-dialog");backButtonDialog.dialog("setContent",$(this));$("#backButtonCloseDialog").on("click",function(){backButtonDialog.dialog("close");return false;});backButtonDialog.dialog("open");});$("input.standarddate, input.weekbeginningdate").each(function(){$(this).mask("99/99/9999");$(this).datepicker({dateFormat:"dd/mm/yy",firstDay:1,showOtherMonths:true,selectOtherMonths:true,beforeShow:populateDate});});$("span.calendarIcon, legend.calendarIcon").each(function(){$(this).show();$(this).on("click",function(){$(this).prev("input.standarddate, input.weekbeginningdate").datepicker("show");});});function populateDate(){if($(this).hasClass("todate")){var fromDateEl=$(".fromdate");var toDate=getValidDateOrNull(this);if(fromDateEl.exists()){var fromDate=getValidDateOrNull(fromDateEl.first());if(fromDate!=null){$(this).datepicker("option","minDate",fromDate);$(this).datepicker("option","defaultDate",fromDate);}else{$(this).datepicker("option","minDate",null);$(this).datepicker("option","defaultDate",null);}}}}
function getValidDateOrNull(datePicker){var datePicker=$(datePicker);var format=datePicker.datepicker("option","dateFormat"),text=datePicker.val(),settings=datePicker.datepicker("option","settings");try{return $.datepicker.parseDate(format,text,settings);}catch(err){return null;}}
$("textarea.maxlength").on("keyup",function(){var maxlength=$(this).data("maxlength"),currentvalue=$(this).val(),currentlength=currentvalue.length;if(!maxlength){var classArray=$(this).attr("class").split(" ");for(var i=0;i<classArray.length;i++){if(classArray[i].indexOf("maxlength-")==0){maxlength=classArray[i].replace("maxlength-","");$(this).data("maxlength",maxlength);break;}}}
if(currentlength>maxlength){$(this).val(currentvalue.substring(0,maxlength));}});$("#tiles").each(function(){$(this).find("li.interesttile").find("input[type='checkbox']").on("click",function(event){event.stopPropagation();$(this).parents(".interesttile").toggleClass("selectedtile");});$(this).find("li.interesttile").on("click",function(){$(this).find("input[type='checkbox']").click();return false;});});$("select.selectautocomplete").each(function(){$(this).selectautocomplete({minLength:1});});$("#selectPaymentMethodCommand").each(function(){var selectPaymentMethodCommand=$(this);selectPaymentMethodCommand.find("div.selectedcard input.csv").each(function(){$(this).focus();});if(selectPaymentMethodCommand.find("div.selectedcard input[type='radio']").is(':checked')){selectPaymentMethodCommand.find("div.selectedcard input.csv, div.selectedcard span.helpIcon").removeClass('displayNone');selectPaymentMethodCommand.find("div.selectedcard input.csv, div.selectedcard span.helpIcon").show();selectPaymentMethodCommand.find("div.selectedcard input.csv").focus();}
selectPaymentMethodCommand.find("div.paymentRow input[type='radio']").click(function(event){event.stopPropagation();var paymentRow=$(this).parent();if(!paymentRow.hasClass("selectedcard")){selectPaymentMethodCommand.find("div.paymentRow").removeClass("selectedcard");selectPaymentMethodCommand.find("div.paymentRow input.csv, div.paymentRow span.helpIcon").hide();selectPaymentMethodCommand.find(".paymentRow input.csv").val("");paymentRow.addClass("selectedcard");paymentRow.find("input.csv, span.helpIcon").removeClass('displayNone');paymentRow.find("input.csv, span.helpIcon").show();paymentRow.find("input.csv").focus();}});});$(document).on("focus","#managePaymentMethodsContainer",function(){$('input[name="useBusinessAddress"]:radio').change(function(){if($(this).val()==='true'){$('#addressFields').slideUp();}else{var adressFields=$('#addressFields');adressFields.hide();adressFields.removeClass("displayNone");adressFields.slideDown();}});});$(document).on("click","#businessBookerType",function(){hideUseOpeneningWeekLink();});$(document).on("change","#businessBookingTestCategoryRecordId",function(){showHideInstructorsListBasedOnSlotSearchTestCategory();showHideExtTextMarkerBasedOnSlotSearchTestCategory();});$(document).on("click","#trainerBookerType",function(){var trainerBookingTestCategoryRecordId=$("#trainerBookingTestCategoryRecordId").val();if(trainerBookingTestCategoryRecordId==="-1"){hideUseOpeneningWeekLink();}else{showUseOpeneningWeekLink();}});$(document).on("change","#trainerBookingTestCategoryRecordId",function(){if($(this).val()==="-1"){hideUseOpeneningWeekLink();}else{showUseOpeneningWeekLink();}
if($("#weekBeginningDate").val()===""){var defaultBookingDate=$("#defaultBookingDate").text();$("#weekBeginningDate").val(defaultBookingDate);}});$(document).on("click","#useOpeneningWeek",function(e){e.preventDefault();var testCategoryId=$("#trainerBookingTestCategoryRecordId").val();if(testCategoryId){testCategoryId=testCategoryId.replace("+","");var openWeekDate=$("#openWeekDate-"+testCategoryId);$("#weekBeginningDate").val(openWeekDate.text());}});function showUseOpeneningWeekLink(){$("#useOpeneningWeek").removeClass("displayNone");}
function hideUseOpeneningWeekLink(){$("#useOpeneningWeek").addClass("displayNone");}
$(document).on("change","#auto-testcentres",function(){if($(this).val()===""){$("#testcentresearchtype").prop("checked",false);$("#testcentres").val("-1");}});$(document).on("change","#testcentregroups",function(){if($("#testcentregroups").val()!=="-1"){$("#testcentregroupsearchtype").click();$("#auto-testcentres").val("");$("#testcentres").val("-1");$("#favtestcentres").val("-1");}else{$("#testcentregroupsearchtype").prop("checked",false);}});$(document).on("change","#favtestcentres",function(){if($("#favtestcentres").val()!=="-1"){$("#favtestcentresearchtype").click();$("#auto-testcentres").val("");$("#testcentres").val("-1");$("#testcentregroups").val("-1");}else{$("#favtestcentresearchtype").prop("checked",false);}});function setupTestCentreGroup(){if(!$("#testCentreGroupContainer").exists())return;$("#newTestCentreGroupFormPanel").hide();if($("#newTestCentreGroupName").hasClass("error")){showNewTestCentreGroupPanel();}
$(document).on("click","#showCreateNewTestCentreGroupForm",function(){showNewTestCentreGroupPanel();});$(document).on("click","#showCreateNewTestCentreGroupFormOr",function(){showNewTestCentreGroupPanel();});var $testCentreNameQuery=$("#testCentreNameQuery");if($testCentreNameQuery.exists()){$testCentreNameQuery.focus();setTimeout(function(){$testCentreNameQuery.focus();},100);}}
function showNewTestCentreGroupPanel(){$("#newTestCentreGroupFormPanel").show();$("#newTestCentreGroupName").focus();}
$("#bookingSearchForm").each(function(){var advancedBookingSearch=$(this).find(".advancedBookingSearch");var showAdvancedBookingSearch=$(this).find(".showAdvancedBookingSearch");var hideAdvancedBookingSearch=$(this).find(".hideAdvancedBookingSearch");showAdvancedBookingSearch.removeClass("displayNone");hideAdvancedBookingSearch.removeClass("displayNone");$(document).on("change","#auto-testCentreId",function(){if($(this).val()===""){$("#testCentreId").val("-1");}});var bookingStatus=$("#bookingStatus").val();var advancedSearch=(bookingStatus!=null&&bookingStatus!=="");if(!advancedSearch){var selectedVehicleSlotTypeCode=$("#vehicleSlotTypeCode").val();advancedSearch=(selectedVehicleSlotTypeCode!=null&&selectedVehicleSlotTypeCode!=="-1");}
if(!advancedSearch){var selectedtestCentreId=$("#auto-testCentreId").val();advancedSearch=(selectedtestCentreId!=null&&selectedtestCentreId!=="");}
if(!advancedSearch){var drivingLicenceNumber=$("#drivingLicenceNumber").val();advancedSearch=(drivingLicenceNumber!=null&&drivingLicenceNumber!=="");}
if(!advancedSearch){var bookingTypeFilter=$("#bookingTypeFilter").val();advancedSearch=(bookingTypeFilter!=null&&bookingTypeFilter!=="ALL");}
if(advancedSearch){advancedBookingSearch.show();hideAdvancedBookingSearch.show();showAdvancedBookingSearch.hide();}else{advancedBookingSearch.hide();hideAdvancedBookingSearch.hide();showAdvancedBookingSearch.show();}
hideAdvancedBookingSearch.on("click",function(){advancedBookingSearch.hide();hideAdvancedBookingSearch.hide();showAdvancedBookingSearch.show();$("#bookingStatus").val("");$("#vehicleSlotTypeCode").val("-1");$("#auto-testCentreId").val("");$("#testCentreId").val("-1");$("#drivingLicenceNumber").val("");$("#bookingTypeFilter").val("ALL");return false;});showAdvancedBookingSearch.on("click",function(){advancedBookingSearch.show();hideAdvancedBookingSearch.show();showAdvancedBookingSearch.hide();return false;});});$("#viewBookingHistory").each(function(){$(this).addClass("displayNone");});$("#showBookingHistory").each(function(){$(this).removeClass("displayNone");});$("#showBookingHistory, #hideBookingHistory").on("click",function(){$("#viewBookingHistory, #showBookingHistory, #hideBookingHistory").toggleClass("displayNone");return false;});$("#showBusinessStatementDateRangeForm").each(function(){$(this).removeClass("displayNone");});$("#businessStatementDateRangeForm").each(function(){var showForm=false;$(this).find(":input").each(function(){if($(this).hasClass("error")){showForm=true;return false;}});if(showForm){$(this).show();$("#showBusinessStatementDateRangeForm").hide();}else{$(this).hide();$("#showBusinessStatementDateRangeForm").show();}});$("#showBusinessStatementDateRangeForm").on("click",function(){$(this).hide();$("#businessStatementDateRangeForm").show();return false;});$("#businessStatementDateRangeForm").each(function(){if($(this).hasClass("error")){$("#businessStatementDateRangeForm").show();}});$("form").find("div.currentvehicledetails").each(function(){var currentvehicledetails=$(this);var vehicledetailssection=currentvehicledetails.closest(".vehicledetailssection");var vehicledetailsform=vehicledetailssection.find(".vehicledetailsform");if(vehicledetailsform.find(".error").length>0){currentvehicledetails.hide();vehicledetailsform.show();}else{vehicledetailsform.hide();var showvehicledetailsform=currentvehicledetails.find(".showvehicledetailsform");showvehicledetailsform.removeClass("displayNone");showvehicledetailsform.on("click",function(){currentvehicledetails.hide();vehicledetailsform.show();});}});$('input[name="selectedBookingToName"]:radio').change(function(){$('tr').removeClass('selected');if($(this).is(':checked')){$(this).closest('tr').addClass('selected');}});$('input[name="selectedBookingToName"]:radio').each(function(){if($(this).is(':checked')){$(this).closest('tr').addClass('selected');}});$('#nameTrainerBookingsTable tr').on("click",function(){$(this).find('td input:radio').prop('checked',true);$('tr').removeClass('selected');$(this).addClass('selected');});(function(){var pageErrors=$("#pageErrors"),locationHash=$(window.location.hash),scrollTop=-1;if(pageErrors.length>0){var position=pageErrors.offset();scrollTop=position.top;}
if(locationHash.length>0){var position=locationHash.offset();scrollTop=(scrollTop>-1)&&(scrollTop<position.top)?scrollTop:position.top;}
if(scrollTop>-1)$("html,body").animate({scrollTop:scrollTop+"px"},500);})();$("ul.sf-menu").superfish({speed:'fast',autoArrows:false,dropShadows:false,delay:'600'});$('a').each(function(){if($(this).is('[href]')&&$(this).hasClass('externalLink')==false&&$(this).hasClass('downloadIcon')==false){if(this.href.indexOf('#')==-1){var sep=(this.href.indexOf('?')!=-1)?'&':'?';$(this).attr('href',this.href+sep+'js=true');}}});function setupWebflowExtension(){$("a:not(a.downloadIcon, a.externalLink, div.ui-datepicker a, a.skip, a.noblock), input:submit").each(function(){$(this).ajaxwebflow({prefix:"cwf",defaultFragment:"body",blockUiStartMillis:2500,blockUiTimeoutMillis:120000});});}
$("a.externalLink").each(function(){$(this).attr("title","Opens link in a new window / tab.");$(this).on("click",function(){window.open($(this).attr("href"));return false;});});$(".mailcheck").on("blur",function(){doMailCheck($(this));});function doMailCheck(e){e.mailcheck({suggested:function(element,suggestion){var templateId="#"+(jqueryId(element.attr('id')+".emailhint.template"));var message=$(templateId).html();message=message.replace("#address#",suggestion.address);message=message.replace("#domain#",suggestion.domain);var hintId="#"+(jqueryId(element.attr('id')+".emailhint"));var hintEl=$(hintId);hintEl.html(message);hintEl.removeAttr("hidden");hintEl.on("click",".domain",function(){element.val(suggestion.full);hintEl.attr("hidden","true");return false;});}});}
function jqueryId(id){var jqueryId=id.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1');return jqueryId;}
function showHideInstructorsListBasedOnSlotSearchTestCategory(){var adiTestCategory=false;var adiTestCategories=$("#adiTestCategories").val();var testCategoryId=$("#businessBookingTestCategoryRecordId").val();if(adiTestCategories&&testCategoryId){var adiTestCategoriesArr=adiTestCategories.split(",");if(adiTestCategoriesArr){$(adiTestCategoriesArr).each(function(index,item){if(("TC-"+item)===testCategoryId){adiTestCategory=true;return true;}});}}
if(adiTestCategory){$("#instructors").show();}else{$("#businessSlotSearchCriteria\\.instructorPRN").val("-1");$("#instructors").hide();}}
$(document).on("change","#amendedBooking\\.testCategory\\.reference",function(){showHideInstructorsListBasedOnAmendBookingTestCategory();});function showHideInstructorsListBasedOnAmendBookingTestCategory(){var adiTestCategory=false;var adiTestCategories=$("#adiTestCategories").val();var testCategoryId=$("#amendedBooking\\.testCategory\\.reference").val();if(adiTestCategories&&testCategoryId){var adiTestCategoriesArr=adiTestCategories.split(",");if(adiTestCategoriesArr){$(adiTestCategoriesArr).each(function(index,item){if(item===testCategoryId){adiTestCategory=true;return true;}});}}
if(adiTestCategory){$("#instructors").show();}else{$("#amendedBooking\\.instructor\\.prn").val("-1");$("#instructors").hide();}}
function showHideExtTextMarkerBasedOnSlotSearchTestCategory(){var extTestTestCategory=false;var extTestTestCategories=$("#extendedTestMarkerTestCategories").val();var testCategoryId=$("#businessBookingTestCategoryRecordId").val();if(extTestTestCategories&&testCategoryId){var extTestTestCategoriesArr=extTestTestCategories.split(",");if(extTestTestCategoriesArr){$(extTestTestCategoriesArr).each(function(index,item){if(("TC-"+item)===testCategoryId){extTestTestCategory=true;return true;}});}}
if(extTestTestCategory){$("#extRetest").show();$("#extRetest").addClass("greyformsection");$("#specialNeeds").removeClass("greyformsection");}else{$("#extRetest").hide();$("#extRetest").removeClass("greyformsection");$("#specialNeeds").addClass("greyformsection");}}
function setupTrainerBooking(){$("#trainerTestCats").show();$("#businessTestCats").hide();$("#instructors").hide();$("#extRetest").hide();$("#specialNeeds").hide();}
function setupBusinessBooking(){$("#businessTestCats").show();$("#trainerTestCats").hide();showHideInstructorsListBasedOnSlotSearchTestCategory();showHideExtTextMarkerBasedOnSlotSearchTestCategory();$("#specialNeeds").show();var $yesNeeds=$("input.yesneeds");if($yesNeeds.is(":checked")){$yesNeeds.closest(".specialNeedsWidget").find(".specialNeeds").show();}}
if($.browser.version<9.0){$(document).on("mouseenter","span.greenbutton input.submit, span.greybutton input.submit",function(){$(this).addClass("hover");}).on("mouseleave","span.greenbutton input.submit, span.greybutton input.submit",function(){$(this).removeClass("hover");});if($.browser.msie&&$.browser.version>7.0){$("#secondaryNavigation a").each(function(){$(this).addClass("relative").append("<span class='tl' /><span class='tr' />");});}
if($.browser.version<7.0){$("ul.sf-menu ul").bgIframe();}}